{"title": "Client Success/Failure Rate Metric Type", "metric_query": "select e.error / t.total * 100 as result from (select count(*) as total, 1 as temp from {var__trp_table} WHERE {CORE_FILTERS} and {TRP_FILTERS}) as t left outer join (select count(*) as error, 1 as temp from {var__trp_table} WHERE {CORE_FILTERS} and {TRP_FILTERS} and {var__column} = {var__a_number}) as e on e.temp = t.temp;", "group_by_1_query": "select t.vg1, e.error / t.total * 100 as error_rate from (select {var__group_by_1} as vg1, count(*) as total from {var__trp_table} WHERE {CORE_FILTERS} and {TRP_FILTERS} group by {var__group_by_1}) as t left outer join (select {var__group_by_1} as vg1, count(*) as error from {var__trp_table} WHERE {CORE_FILTERS} and {TRP_FILTERS} and {var__column}={var__a_number} group by {var__group_by_1}) as e on e.vg1 = t.vg1 order by error_rate desc;", "group_by_2_query": "select t.vg1,t.vg2, e.error / t.total * 100 as error_rate from (select {var__group_by_1} as vg1, {var__group_by_2} as vg2, count(*) as total from {var__trp_table} WHERE {CORE_FILTERS} and {TRP_FILTERS} group by vg1, vg2) as t left outer join (select {var__group_by_1} as vg1, {var__group_by_2} as vg2, count(*) as error from {var__trp_table} WHERE {CORE_FILTERS} and {TRP_FILTERS} and {var__column}={var__a_number} group by vg1, vg2) as e on e.vg1= t.vg1 and e.vg2 = t.vg2 ORDER BY error_rate desc;", "sql_query_config": {"var__trp_table": {"aspect": "TRP_TABLE"}, "var__group_by_1": {"aspect": "TRP_GROUP_1"}, "var__group_by_2": {"aspect": "TRP_GROUP_2"}, "var__column": {"aspect": "USER_INPUT", "type": "ModelField", "label": "Success/Failure Criteria Field"}, "var__a_number": {"aspect": "USER_INPUT", "type": "IntegerField", "label": "Success/Failure Criteria Value"}}, "dw_name": "mysql"}